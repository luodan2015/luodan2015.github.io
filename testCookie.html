<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>测试获取cookie信息</title>
</head>
<body>
<h2>
  cookie信息：
</h2>
<div id="showCookie"></div>
<h2>
  请求返回信息：
</h2>
<div id="showResponse"></div>
<script>
  //写cookies
  function setCookie(name,value)
  {
    var Days = 30;
    var exp = new Date();
    exp.setTime(exp.getTime() + Days*24*60*60*1000);
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
  }
//  读取cookies
  function getCookie(name)
  {
    var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
    if(arr=document.cookie.match(reg))
      return unescape(arr[2]);
    else
      return null;
  }
//  删除cookies
  function delCookie(name)
  {
    var exp = new Date();
    exp.setTime(exp.getTime() - 1);
    var cval=getCookie(name);
    if(cval!=null)
      document.cookie= name + "="+cval+";expires="+exp.toGMTString();
  }
  document.getElementById('showCookie').innerHTML = document.cookie;
  var params = '';
  if (document.cookie) {
//    var arr = document.cookie.split(';');
//    for(var i = 0; i < arr.length; i++){
//      var item = arr[i].split('=');
//      params[item[0]] = item[1];
//    }
    params = document.cookie.replace(/;/g, '&');
  } else {
    params = ('app_version=4.2.3; device=HUAWEI;' +
      ' categoryName=注册会计师; categoryId=7;' +
      ' token=ab042064f3d1c9b1; app_key=m3yu1fjc;' +
      ' sk=d37d8ad9-46f4-427b-8b2b-e8e6eccdfe7c.' +
      '1527238626642.9267001.ab042064f3d1c9b1.' +
      '53328d25b7bc32d3f45f48b88067e67f').replace(/;/g, '&');
    console.log('未获取到cookie!!!');
  }
  params = ('app_version=4.2.3; device=HUAWEI;' +
    ' categoryName=注册会计师; categoryId=7;' +
    ' token=ab042064f3d1c9b1; app_key=m3yu1fjc;' +
    ' sk=d37d8ad9-46f4-427b-8b2b-e8e6eccdfe7c.' +
    '1527238626642.9267001.ab042064f3d1c9b1.' +
    '53328d25b7bc32d3f45f48b88067e67f').replace(/;/g, '&');

//  获取当前设备信息
  var browser={
    versions:function(){
      var u = navigator.userAgent, app = navigator.appVersion;
      return {         //移动终端浏览器版本信息
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或uc浏览器
        iPhone: u.indexOf('iPhone') > -1 , //是否为iPhone或者QQHD浏览器
        iPad: u.indexOf('iPad') > -1, //是否iPad
        webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
      };
    }(),
    language:(navigator.browserLanguage || navigator.language).toLowerCase()
  }

//  判断是安卓还是ios
  if(browser.versions.ios){
    console.log('ios');
//    window.open("gokhdetails()"); // 方法名可以随便起
  }else if(browser.versions.android){
    console.log('android');
//    window.unionCar.gokhdetails(); // 方法名可以随便起
  }

/* 发送请求 */
//  var ajax = new XMLHttpRequest();
//  ajax.open('get', 'http://app.haixue.com/qa/v1/getMyQAList.do?' + params);
//  ajax.send();
//  ajax.onreadystatechange = function () {
//    if (ajax.readyState == 4 && ajax.status == 200) {
//      var res = JSON.parse(ajax.responseText);
//      console.log('res', res);
//      document.getElementById('showResponse').innerHTML = ajax.responseText;
//      if (window.wx) {  // eslint-disable-line
//
//        wx.error(function(res){ // eslint-disable-line
//          console.log('validate failed:', res); // eslint-disable-line
//        });
//      } else {
//        console.log('ws jssdk can not work'); // eslint-disable-line
//      }
//    }
//  }

</script>
</body>
</html>